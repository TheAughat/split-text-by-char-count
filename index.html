<!DOCTYPE html>
<html>
<head>
    <title>Split Text by Limit</title>
    <style>
        textarea {
            width: 100%;
            height: 30vh;
        }
    </style>
</head>
<body>
<h2>Split Text by Character Limit</h2>

<textarea id="typehere"></textarea>
<p id="wordcount">Chars Count: </p>

<input type="text" placeholder="Limit (default: 2000)" id="inplimit"></input><br><br>

<button onclick="checkChars()">Check Char Count</button>
<button onclick="split()">Split</button>
<button onclick="copytext()" id="copybutton">Copy Original</button>

<div id='texthere'></div>

<p id="demo"></p>

<script>
let splitTexts = [];

function checkChars() {
    document.getElementById('wordcount').innerText = 'Chars Count: ' + document.getElementById('typehere').value.length;
}

function split() {
    const limiter = document.getElementById('inplimit').value;
    const LIMIT = (limiter.length > 0)?parseInt(limiter):2000;
    const textToSplit = document.getElementById('typehere').value;

    splitTexts.length = 0;

    if (textToSplit.length > LIMIT) {
        for (let i = 0; i<textToSplit.length; i += LIMIT) {
            if (i + LIMIT < textToSplit.length) {
                splitTexts.push(textToSplit.substring(i, i + LIMIT));
            }
            else {
                splitTexts.push(textToSplit.substring(i, textToSplit.length));
            }
        }
    }
    else {
        splitTexts.push(textToSplit);
    }
    
    const splithtml = splitTexts.map((element, index) => {
        return `<p id='para-${index}'>${element}</p>
        <button onclick="copytext(${index}, 'copybtn-${index}')" id="copybtn-${index}">Copy Paragraph ${index + 1}</button>
        `;
    });
    document.getElementById("texthere").innerHTML = splithtml.join('');
}

async function copytext(identity = 'typehere', btnId = 'copybutton') {
    if (typeof identity === 'string') {
        await navigator.clipboard.writeText(document.getElementById(identity).value);
    }
    else {
        await navigator.clipboard.writeText(splitTexts[identity]);
    }
    document.getElementById(btnId).innerText = 'Copied!';
    setTimeout(() => {
        document.getElementById(btnId).innerText = 'Copy Again!';
    }, 1000);
}
</script>

</body>
</html>
